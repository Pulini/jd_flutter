import 'package:jd_flutter/utils/utils.dart';

// InterID : 39319
// DecrementNumber : "D0003966"
// StartDate : "2025-03-27"
// DispatchNumber : "000000115430"
// StubBar1 : "460500007"
// StubBar2 : ""
// StubBar3 : "460401755"
// StubBarName1 : "新_回收料头(轻质)"
// StubBarName2 : ""
// StubBarName3 : "拌料半成品DX242184--轻质TPR-黑色-有喷漆-63-65"
// StubBar1PrintFlag : 0
// StubBar2PrintFlag : 0
// StubBar3PrintFlag : 0
// MaterialNumber : "06200401584"
// MaterialName : "注塑半成品DX242184--轻质TPR-黑色-有喷漆-63-65"
// FactoryType : "DX242184-5"
// Machine : "JT27"
// DecreasingMachine : "JT8"
// Factory : "1500"
// Shift : "白班"
// Processflow : "ZHUS"
// Remarks : "缅甸喷漆 纸箱包装 英文标"
// Withdrawal : " "
// Items : [{"EntryID":1,"Size":"36","SizeMaterialNumber":"0620040158402","SumQty":319.000,"SumUnderQty":319.0,"SumReportQty":0.0,"Mould":0.0,"TodayDispatchQty":0.000,"LastNotFullQty":0.000,"Capacity":18.00,"ReportQty":0.0,"NotFullQty":0.000,"BoxesQty":0.000,"ConfirmCurrentWorkingHours":"0.74200","WorkingHoursUnit":"H","BUoM":"双","MantissaMark":"","MantissaFlag":0,"LastMantissaFlag":0,"AvailableMouldsQty":1.000,"CapacityPerMold":150.000},{"EntryID":2,"Size":"37","SizeMaterialNumber":"0620040158403","SumQty":399.000,"SumUnderQty":167.0,"SumReportQty":232.0,"Mould":1.0,"TodayDispatchQty":150.000,"LastNotFullQty":10.000,"Capacity":18.00,"ReportQty":0.0,"NotFullQty":0.000,"BoxesQty":0.000,"ConfirmCurrentWorkingHours":"0.74200","WorkingHoursUnit":"H","BUoM":"双","MantissaMark":"","MantissaFlag":0,"LastMantissaFlag":0,"AvailableMouldsQty":1.000,"CapacityPerMold":150.000},{"EntryID":3,"Size":"38","SizeMaterialNumber":"0620040158404","SumQty":702.000,"SumUnderQty":461.0,"SumReportQty":241.0,"Mould":1.0,"TodayDispatchQty":150.000,"LastNotFullQty":1.000,"Capacity":18.00,"ReportQty":0.0,"NotFullQty":0.000,"BoxesQty":0.000,"ConfirmCurrentWorkingHours":"0.74200","WorkingHoursUnit":"H","BUoM":"双","MantissaMark":"","MantissaFlag":0,"LastMantissaFlag":0,"AvailableMouldsQty":2.000,"CapacityPerMold":150.000},{"EntryID":4,"Size":"39","SizeMaterialNumber":"0620040158405","SumQty":798.000,"SumUnderQty":558.0,"SumReportQty":240.0,"Mould":1.0,"TodayDispatchQty":150.000,"LastNotFullQty":0.000,"Capacity":18.00,"ReportQty":0.0,"NotFullQty":0.000,"BoxesQty":0.000,"ConfirmCurrentWorkingHours":"0.74200","WorkingHoursUnit":"H","BUoM":"双","MantissaMark":"","MantissaFlag":0,"LastMantissaFlag":0,"AvailableMouldsQty":2.000,"CapacityPerMold":150.000},{"EntryID":5,"Size":"40","SizeMaterialNumber":"0620040158406","SumQty":480.000,"SumUnderQty":263.0,"SumReportQty":217.0,"Mould":1.0,"TodayDispatchQty":150.000,"LastNotFullQty":16.000,"Capacity":18.00,"ReportQty":0.0,"NotFullQty":0.000,"BoxesQty":0.000,"ConfirmCurrentWorkingHours":"0.74200","WorkingHoursUnit":"H","BUoM":"双","MantissaMark":"","MantissaFlag":0,"LastMantissaFlag":0,"AvailableMouldsQty":2.000,"CapacityPerMold":150.000},{"EntryID":6,"Size":"41","SizeMaterialNumber":"0620040158407","SumQty":480.000,"SumUnderQty":245.0,"SumReportQty":235.0,"Mould":1.0,"TodayDispatchQty":150.000,"LastNotFullQty":13.000,"Capacity":18.00,"ReportQty":0.0,"NotFullQty":0.000,"BoxesQty":0.000,"ConfirmCurrentWorkingHours":"0.74200","WorkingHoursUnit":"H","BUoM":"双","MantissaMark":"","MantissaFlag":0,"LastMantissaFlag":0,"AvailableMouldsQty":1.000,"CapacityPerMold":150.000},{"EntryID":7,"Size":"42","SizeMaterialNumber":"0620040158408","SumQty":258.000,"SumUnderQty":258.0,"SumReportQty":0.0,"Mould":0.0,"TodayDispatchQty":0.000,"LastNotFullQty":0.000,"Capacity":18.00,"ReportQty":0.0,"NotFullQty":0.000,"BoxesQty":0.000,"ConfirmCurrentWorkingHours":"0.74200","WorkingHoursUnit":"H","BUoM":"双","MantissaMark":"","MantissaFlag":0,"LastMantissaFlag":0,"AvailableMouldsQty":1.000,"CapacityPerMold":150.000}]
// ProcessList : [{"FWorkingHoursUnit":"H","FWorkingHours":0.74200,"ProcessNumber":"ZD1","ProcessName":"撬模1"},{"FWorkingHoursUnit":"H","FWorkingHours":0.74200,"ProcessNumber":"ZD2","ProcessName":"撬模2"},{"FWorkingHoursUnit":"H","FWorkingHours":0.74200,"ProcessNumber":"ZD3","ProcessName":"修边"}]
// Status : 0
// MoldNo : "DX242184-5"
// Weight : 540.0
/// BarCodeList : ["123"]

class ProcessPlanDetailInfo {
  ProcessPlanDetailInfo({
      this.interID, 
      this.decrementNumber, 
      this.startDate, 
      this.dispatchNumber, 
      this.stubBar1, 
      this.stubBar2, 
      this.stubBar3, 
      this.stubBarName1, 
      this.stubBarName2, 
      this.stubBarName3, 
      this.stubBar1PrintFlag, 
      this.stubBar2PrintFlag, 
      this.stubBar3PrintFlag, 
      this.materialNumber, 
      this.materialName, 
      this.factoryType, 
      this.machine, 
      this.decreasingMachine, 
      this.factory, 
      this.shift, 
      this.processflow, 
      this.remarks, 
      this.withdrawal, 
      this.items, 
      this.processList, 
      this.status, 
      this.moldNo, 
      this.weight, 
      this.barCodeList,});

  ProcessPlanDetailInfo.fromJson(dynamic json) {
    interID = json['InterID'];
    decrementNumber = json['DecrementNumber'];
    startDate = json['StartDate'];
    dispatchNumber = json['DispatchNumber'];
    stubBar1 = json['StubBar1'];
    stubBar2 = json['StubBar2'];
    stubBar3 = json['StubBar3'];
    stubBarName1 = json['StubBarName1'];
    stubBarName2 = json['StubBarName2'];
    stubBarName3 = json['StubBarName3'];
    stubBar1PrintFlag = json['StubBar1PrintFlag'];
    stubBar2PrintFlag = json['StubBar2PrintFlag'];
    stubBar3PrintFlag = json['StubBar3PrintFlag'];
    materialNumber = json['MaterialNumber'];
    materialName = json['MaterialName'];
    factoryType = json['FactoryType'];
    machine = json['Machine'];
    decreasingMachine = json['DecreasingMachine'];
    factory = json['Factory'];
    shift = json['Shift'];
    processflow = json['Processflow'];
    remarks = json['Remarks'];
    withdrawal = json['Withdrawal'];
    if (json['Items'] != null) {
      items = [];
      json['Items'].forEach((v) {
        items?.add(Items.fromJson(v));
      });
    }
    if (json['ProcessList'] != null) {
      processList = [];
      json['ProcessList'].forEach((v) {
        processList?.add(ProcessList.fromJson(v));
      });
    }
    status = json['Status'];
    moldNo = json['MoldNo'];
    weight = json['Weight'];
    barCodeList = json['BarCodeList'] != null ? json['BarCodeList'].cast<String>() : [];
  }
  int? interID=0;
  String? decrementNumber;
  String? startDate;
  String? dispatchNumber;
  String? stubBar1;
  String? stubBar2;
  String? stubBar3;
  String? stubBarName1;
  String? stubBarName2;
  String? stubBarName3;
  int? stubBar1PrintFlag;
  int? stubBar2PrintFlag;
  int? stubBar3PrintFlag;
  String? materialNumber;
  String? materialName;
  String? factoryType;
  String? machine;
  String? decreasingMachine;
  String? factory;
  String? shift;
  String? processflow;
  String? remarks;
  String? withdrawal;
  List<Items>? items;
  List<ProcessList>? processList;
  int? status;
  String? moldNo;
  double? weight;
  List<String>? barCodeList;

  Map<String, dynamic> toJson() {
    final map = <String, dynamic>{};
    map['InterID'] = interID;
    map['DecrementNumber'] = decrementNumber;
    map['StartDate'] = startDate;
    map['DispatchNumber'] = dispatchNumber;
    map['StubBar1'] = stubBar1;
    map['StubBar2'] = stubBar2;
    map['StubBar3'] = stubBar3;
    map['StubBarName1'] = stubBarName1;
    map['StubBarName2'] = stubBarName2;
    map['StubBarName3'] = stubBarName3;
    map['StubBar1PrintFlag'] = stubBar1PrintFlag;
    map['StubBar2PrintFlag'] = stubBar2PrintFlag;
    map['StubBar3PrintFlag'] = stubBar3PrintFlag;
    map['MaterialNumber'] = materialNumber;
    map['MaterialName'] = materialName;
    map['FactoryType'] = factoryType;
    map['Machine'] = machine;
    map['DecreasingMachine'] = decreasingMachine;
    map['Factory'] = factory;
    map['Shift'] = shift;
    map['Processflow'] = processflow;
    map['Remarks'] = remarks;
    map['Withdrawal'] = withdrawal;
    if (items != null) {
      map['Items'] = items?.map((v) => v.toJson()).toList();
    }
    if (processList != null) {
      map['ProcessList'] = processList?.map((v) => v.toJson()).toList();
    }
    map['Status'] = status;
    map['MoldNo'] = moldNo;
    map['Weight'] = weight;
    map['BarCodeList'] = barCodeList;
    return map;
  }

}

/// FWorkingHoursUnit : "H"
/// FWorkingHours : 0.74200
/// ProcessNumber : "ZD1"
/// ProcessName : "撬模1"

class ProcessList {
  ProcessList({
      this.fWorkingHoursUnit, 
      this.fWorkingHours, 
      this.processNumber, 
      this.processName,});

  ProcessList.fromJson(dynamic json) {
    fWorkingHoursUnit = json['FWorkingHoursUnit'];
    fWorkingHours = json['FWorkingHours'];
    processNumber = json['ProcessNumber'];
    processName = json['ProcessName'];
  }
  String? fWorkingHoursUnit;
  double? fWorkingHours;
  String? processNumber;
  String? processName;

  Map<String, dynamic> toJson() {
    final map = <String, dynamic>{};
    map['FWorkingHoursUnit'] = fWorkingHoursUnit;
    map['FWorkingHours'] = fWorkingHours;
    map['ProcessNumber'] = processNumber;
    map['ProcessName'] = processName;
    return map;
  }

}

/// EntryID : 1
/// Size : "36"
/// SizeMaterialNumber : "0620040158402"
/// SumQty : 319.000
/// SumUnderQty : 319.0
/// SumReportQty : 0.0
/// Mould : 0.0
/// TodayDispatchQty : 0.000
/// LastNotFullQty : 0.000
/// Capacity : 18.00
/// ReportQty : 0.0
/// NotFullQty : 0.000
/// BoxesQty : 0.000
/// ConfirmCurrentWorkingHours : "0.74200"
/// WorkingHoursUnit : "H"
/// BUoM : "双"
/// MantissaMark : ""
/// MantissaFlag : 0
/// LastMantissaFlag : 0
/// AvailableMouldsQty : 1.000
/// CapacityPerMold : 150.000

class Items {
  Items({
      this.entryID, 
      this.size, 
      this.sizeMaterialNumber, 
      this.sumQty, 
      this.sumUnderQty, 
      this.sumReportQty, 
      this.mould, 
      this.todayDispatchQty, 
      this.lastNotFullQty, 
      this.capacity, 
      this.reportQty, 
      this.notFullQty, 
      this.boxesQty, 
      this.confirmCurrentWorkingHours, 
      this.workingHoursUnit, 
      this.bUoM, 
      this.mantissaMark, 
      this.mantissaFlag, 
      this.lastMantissaFlag, 
      this.availableMouldsQty, 
      this.capacityPerMold,});

  Items.fromJson(dynamic json) {
    entryID = json['EntryID'];
    size = json['Size'];
    sizeMaterialNumber = json['SizeMaterialNumber'];
    sumQty = json['SumQty'];
    sumUnderQty = json['SumUnderQty'];
    sumReportQty = json['SumReportQty'];
    mould = json['Mould'];
    todayDispatchQty = json['TodayDispatchQty'];
    lastNotFullQty = json['LastNotFullQty'];
    capacity = json['Capacity'];
    reportQty = json['ReportQty'];
    notFullQty = json['NotFullQty'];
    boxesQty = json['BoxesQty'];
    confirmCurrentWorkingHours = json['ConfirmCurrentWorkingHours'];
    workingHoursUnit = json['WorkingHoursUnit'];
    bUoM = json['BUoM'];
    mantissaMark = json['MantissaMark'];
    mantissaFlag = json['MantissaFlag'];
    lastMantissaFlag = json['LastMantissaFlag'];
    availableMouldsQty = json['AvailableMouldsQty'];
    capacityPerMold = json['CapacityPerMold'];
  }
  int? entryID;
  String? size;
  String? sizeMaterialNumber;
  double? sumQty;
  double? sumUnderQty;
  double? sumReportQty;
  double? mould;
  double? todayDispatchQty;
  double? lastNotFullQty;  //上把未满
  double? capacity;
  double? reportQty;
  double? notFullQty;
  double? boxesQty;
  String? confirmCurrentWorkingHours;
  String? workingHoursUnit;
  String? bUoM;
  String? mantissaMark;
  int? mantissaFlag;
  int? lastMantissaFlag;  //尾数标识
  double? availableMouldsQty;
  double? capacityPerMold;

  Map<String, dynamic> toJson() {
    final map = <String, dynamic>{};
    map['EntryID'] = entryID;
    map['Size'] = size;
    map['SizeMaterialNumber'] = sizeMaterialNumber;
    map['SumQty'] = sumQty;
    map['SumUnderQty'] = sumUnderQty;
    map['SumReportQty'] = sumReportQty;
    map['Mould'] = mould;
    map['TodayDispatchQty'] = todayDispatchQty;
    map['LastNotFullQty'] = lastNotFullQty;
    map['Capacity'] = capacity;
    map['ReportQty'] = reportQty;
    map['NotFullQty'] = notFullQty;
    map['BoxesQty'] = boxesQty;
    map['ConfirmCurrentWorkingHours'] = confirmCurrentWorkingHours;
    map['WorkingHoursUnit'] = workingHoursUnit;
    map['BUoM'] = bUoM;
    map['MantissaMark'] = mantissaMark;
    map['MantissaFlag'] = mantissaFlag;
    map['LastMantissaFlag'] = lastMantissaFlag;
    map['AvailableMouldsQty'] = availableMouldsQty;
    map['CapacityPerMold'] = capacityPerMold;
    return map;
  }


  //报工数量：箱数 * 箱容 + 当班未满  - 上班尾数
  double itemReportQty() => (boxesQty ?? 0)*(capacity?? 0).add(notFullQty?? 0.0).sub(lastNotFullQty?? 0.0);

}